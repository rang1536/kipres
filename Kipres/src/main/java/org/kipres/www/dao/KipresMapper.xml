<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="KipresDao">
 
<insert id="insertNotice" parameterType="org.kipres.www.domain.Notice">
	<selectKey keyProperty="ntNum" resultType="int" order="BEFORE">
		SELECT kipres_notice_seq.NEXTVAL FROM DUAL
	</selectKey>
	INSERT INTO KIPRES.NOTICE(
		nt_num,
		nt_title,
		nt_contents,
		nt_insert_date
		<if test="ntUpdate != null and ntUpdate != '' and ntUpdate != 0">,nt_update</if>
		<if test="ntHit != null and ntHit != '' and ntHit != 0">,nt_hit</if>
		<if test="userNum != null and userNum != '' and userNum != 0">,user_num</if>
		)
	VALUES(
		#{ntNum},
		#{ntTitle},
		#{ntContents},
		to_char(sysdate, 'YYYY-MM-DD')
		<if test="ntUpdate != null and ntUpdate != '' and ntUpdate != 0">,#{ntUpdate}</if>
		<if test="ntHit != null and ntHit != '' and ntHit != 0">,#{ntHit}</if>
		<if test="userNum != null and userNum != '' and userNum != 0">,#{userNum}</if>
	)
</insert>

<select id="selectCount" parameterType="org.kipres.www.domain.Notice">
	SELECT COUNT(*) 
	FROM KIPRES.NOTICE
</select>

<select id="selectNotice" parameterType="org.kipres.www.domain.Notice">
	SELECT * 
	FROM KIPRES.NOTICE 
	ORDER BY nt_num DESC
</select>

</mapper>